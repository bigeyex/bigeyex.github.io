System.register("chunks:///_virtual/GameDirector.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./cardSuits.ts","./CardDeck.ts","./TopBar.ts"],(function(e){"use strict";var t,r,a,i,s,n,c,o,l,d,p,h,y,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.defineProperty},function(e){n=e.cclegacy,c=e._decorator,o=e.Label,l=e.Component},function(e){d=e.createDeck,p=e.evaluateHand,h=e.shuffleDeck},function(e){y=e.CardDeck},function(e){u=e.TopBar}],execute:function(){var D,m,f,g,k,v,H,b,L;n._RF.push({},"22326GtDXxEN5XRUfsTsZRb","GameDirector",void 0);var C=c.ccclass,S=c.property;e("GameDirector",(D=C("GameDirector"),m=S({type:u}),f=S({type:y}),g=S({type:o}),D((H=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,a(i(t),"topBar",H,i(t)),a(i(t),"cardDeck",b,i(t)),a(i(t),"gameLog",L,i(t)),s(i(t),"playerDeck",[]),s(i(t),"enemyDeck",[]),s(i(t),"playerDiscarded",[]),s(i(t),"enemyDiscarded",[]),s(i(t),"playerHand",[]),s(i(t),"enemyHand",[]),s(i(t),"gameScore",100),t}r(t,e);var n=t.prototype;return n.start=function(){this.initGame()},n.initGame=function(){var e;this.playerDeck=d(),this.enemyDeck=d(),this.playerDiscarded=[],this.enemyDiscarded=[],this.playerHand=this.playerDeck.splice(0,5),this.enemyHand=this.enemyDeck.splice(0,5),null===(e=this.cardDeck)||void 0===e||e.updateCards(this.playerHand)},n.speak=function(){var e,t,r=this.cardDeck.getCardsToReplace(),a=this.replaceUsedCards(this.playerHand,r,this.playerDeck,this.playerDiscarded);this.playerHand=a[0],this.playerDeck=a[1],this.playerDiscarded=a[2];var i=p(this.playerHand),s=i[0],n=i[1],c=i[2],o=p(this.enemyHand),l=o[0],d=o[1];console.info(n);var h=this.replaceUsedCards(this.playerHand,n,this.playerDeck,this.playerDiscarded);this.playerHand=h[0],this.playerDeck=h[1],this.playerDiscarded=h[2];var y=this.replaceUsedCards(this.enemyHand,d,this.enemyDeck,this.enemyDiscarded);this.enemyHand=y[0],this.enemyDeck=y[1],this.enemyDiscarded=y[2],null===(e=this.cardDeck)||void 0===e||e.updateCards(this.playerHand),this.gameScore+=s-l,this.gameScore<0?this.setLog("You Lose"):this.gameScore>200?this.setLog("You Win"):(this.setLog("You: "+s+" Enemy: "+l+" "+JSON.stringify(c)),null===(t=this.topBar)||void 0===t||t.setScore(this.gameScore))},n.replaceUsedCards=function(e,t,r,a){for(var i=0;i<e.length;i++)if(-1!=t.indexOf(e[i])){0==r.length&&(r=a,a=[],h(r));var s=r.shift();a.push(e[i]),e[i]=s}return[e,r,a]},n.setLog=function(e){this.gameLog.string=e},t}(l)).prototype,"topBar",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(v.prototype,"cardDeck",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(v.prototype,"gameLog",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=v))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/CardDeck.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SingleCard.ts"],(function(r){"use strict";var e,t,n,a,c,i,o,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,a=r.assertThisInitialized},function(r){c=r.cclegacy,i=r._decorator,o=r.Component},function(r){u=r.SingleCard}],execute:function(){var s,d,l,p,f;c._RF.push({},"2d3b81cX2dNmJSdhne93FeV","CardDeck",void 0);var h=i.ccclass,C=i.property;r("CardDeck",(s=h("CardDeck"),d=C({type:u}),s((f=e((p=function(r){function e(){for(var e,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return e=r.call.apply(r,[this].concat(c))||this,n(a(e),"cards",f,a(e)),e}t(e,r);var c=e.prototype;return c.start=function(){},c.updateCards=function(r){for(var e=0;e<5;e++)this.cards[e].updateCard(r[e])},c.getCardsToReplace2=function(){return this.cards.map((function(r){return null==r?void 0:r.toBeReplaced}))},c.getCardsToReplace=function(){return this.cards.filter((function(r){return r.toBeReplaced})).map((function(r){return r.card}))},e}(o)).prototype,"cards",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=p))||l));c._RF.pop()}}}));

System.register("chunks:///_virtual/cardSuits.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(r){"use strict";var e,t,u;return{setters:[function(r){e=r.createForOfIteratorHelperLoose},function(r){t=r.cclegacy,u=r.Enum}],execute:function(){r({createDeck:function(){for(var r=[n.Reason,n.Sentimental,n.Justice],t=[2,3,4,5,6,7,8,9,10,11,12,13,14],u=[],a=0,i=r;a<i.length;a++)for(var o,c=i[a],f=e(t);!(o=f()).done;){var p=o.value;u.push([p,c])}return s(u),u},evaluateHand:function(r){for(var e=[],t=[],u=r.sort((function(r,e){return r[0]-e[0]})),n=!0,s=u[0][0],a=1;a<5;a++){if(u[a][0]!=s+1){n=!1;break}s++}if(n){var i=2*u.map((function(r){return r[0]})).reduce((function(r,e){return r+e}));e.push({type:"straight",score:i,suit:u[4][1]}),t=r}for(var o=!0,c=u[0][1],f=1;f<5;f++)if(u[f][1]!=c){o=!1;break}if(o){var p=1*u.map((function(r){return r[0]})).reduce((function(r,e){return r+e}));e.push({type:"flush",score:p,suit:c}),t=r}s=u[0][0],c=u[0][1];for(var h=!1,l=1;l<5;l++)if(u[l][0]==s)if(h){var v=6*s;e.push({type:"three",score:v,suit:u[l][1]}),t.push(u[l]),h=!1}else h=!0,t.push(u[l],u[l-1]);else{if(h){h=!1;var d=3*s;e.push({type:"pair",score:d,suit:c})}s=u[l][0],c=u[l][1]}if(h){var g=3*s;e.push({type:"pair",score:g,suit:c})}0==e.length&&(e.push({type:"highest",score:u[4][0],suit:u[4][1]}),t.push(u[4]));return[e.map((function(r){return r.score})).reduce((function(r,e){return r+e})),t,e]},labelForCardValue:function(r){return["err","err","2","3","4","5","6","7","8","9","10","J","Q","K","A"][r]},shuffleDeck:s}),t._RF.push({},"4811b4j/UxEOYMp+9d6wMaj","cardSuits",void 0);var n=r("Suit",u({Reason:0,Sentimental:1,Justice:2}));function s(r){for(var e=r.length-1;e>0;e--){var t=Math.floor(Math.random()*(e+1)),u=[r[t],r[e]];r[e]=u[0],r[t]=u[1]}}t._RF.pop()}}}));

System.register("chunks:///_virtual/TopBar.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,i,n,o,l,a,s,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.defineProperty,n=e.assertThisInitialized,o=e.initializerDefineProperty},function(e){l=e.cclegacy,a=e._decorator,s=e.Node,u=e.Component}],execute:function(){var c,p,b,f,y,d,B,h,v;l._RF.push({},"b3052c06ntG2bufdMWQek+9","TopBar",void 0);var g=a.ccclass,_=a.property;e("TopBar",(c=g("TopBar"),p=_({type:s}),b=_({type:s}),f=_({type:s}),c((B=r((d=function(e){function r(){for(var r,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return r=e.call.apply(e,[this].concat(l))||this,i(n(r),"MAX_BAR_LENGTH",620),o(n(r),"blueBar",B,n(r)),o(n(r),"redBar",h,n(r)),o(n(r),"sigil",v,n(r)),r}t(r,e);var l=r.prototype;return l.start=function(){},l.setScore=function(e){var r,t,i;null===(r=this.redBar)||void 0===r||r.setScale(e/100,1,1),null===(t=this.blueBar)||void 0===t||t.setScale((200-e)/100,1,1),null===(i=this.sigil)||void 0===i||i.setPosition((e-100)*this.MAX_BAR_LENGTH/100,0,0)},r}(u)).prototype,"blueBar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=r(d.prototype,"redBar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=r(d.prototype,"sigil",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=d))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/SingleCard.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./cardSuits.ts"],(function(e){"use strict";var t,i,a,r,l,n,o,s,u,c,p,b,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,l=e.defineProperty},function(e){n=e.cclegacy,o=e._decorator,s=e.SpriteFrame,u=e.Label,c=e.Sprite,p=e.Node,b=e.Component},function(e){h=e.Suit,y=e.labelForCardValue}],execute:function(){var d,g,S,m,f,w,R,v,z,C,k,B,F,M,T,J,L,_,D,I,H,P;n._RF.push({},"ba24bkJJKxDX7dH6+FSbsXy","SingleCard",void 0);var x=o.ccclass,A=o.property;e("SingleCard",(d=x("SingleCard"),g=A({type:h}),S=A({type:s}),m=A({type:s}),f=A({type:s}),w=A({type:u}),R=A({type:c}),v=A({type:p}),z=A({type:p}),d((B=t((k=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"value",B,r(t)),a(r(t),"suit",F,r(t)),a(r(t),"allowInteraction",M,r(t)),a(r(t),"toBeReplaced",T,r(t)),a(r(t),"ReasonSymbol",J,r(t)),a(r(t),"SentimentalSymbol",L,r(t)),a(r(t),"JusticeSymbol",_,r(t)),a(r(t),"valueLabel",D,r(t)),a(r(t),"suitSigil",I,r(t)),a(r(t),"replaceMask",H,r(t)),a(r(t),"switchCardMark",P,r(t)),l(r(t),"card",[2,h.Reason]),t}i(t,e);var n=t.prototype;return n.start=function(){this.updateCard([this.value,this.suit]),this.node.on(p.EventType.TOUCH_START,this.onTouchStart,this)},n.updateCard=function(e){switch(this.card=e,this.value=e[0],this.suit=e[1],this.valueLabel.string=y(this.value),this.suit){case h.Reason:this.suitSigil.spriteFrame=this.ReasonSymbol;break;case h.Sentimental:this.suitSigil.spriteFrame=this.SentimentalSymbol;break;case h.Justice:this.suitSigil.spriteFrame=this.JusticeSymbol}this.toBeReplaced=!0,this.toggleReplace()},n.toggleReplace=function(){this.toBeReplaced=!this.toBeReplaced,this.replaceMask.active=this.toBeReplaced,this.switchCardMark.active=this.toBeReplaced},n.onTouchStart=function(){this.allowInteraction&&this.toggleReplace()},t}(b)).prototype,"value",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),F=t(k.prototype,"suit",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Reason}}),M=t(k.prototype,"allowInteraction",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=t(k.prototype,"toBeReplaced",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),J=t(k.prototype,"ReasonSymbol",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(k.prototype,"SentimentalSymbol",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(k.prototype,"JusticeSymbol",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(k.prototype,"valueLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(k.prototype,"suitSigil",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(k.prototype,"replaceMask",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(k.prototype,"switchCardMark",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=k))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpeakButton.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDirector.ts"],(function(t){"use strict";var e,r,n,o,i,a,c,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,u=t.Component},function(t){l=t.GameDirector}],execute:function(){var s,p,f,h,y,v;i._RF.push({},"fa929ALuHxGJ6cfqfJ2nX6r","SpeakButton",void 0);var g=a.ccclass,m=a.property;t("SpeakButton",(s=g("SpeakButton"),p=m({type:l}),s((y=e((h=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,n(o(e),"allowInteraction",y,o(e)),n(o(e),"gameDirector",v,o(e)),e}r(e,t);var i=e.prototype;return i.start=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchStart,this)},i.onTouchStart=function(){var t;null===(t=this.gameDirector)||void 0===t||t.speak()},e}(u)).prototype,"allowInteraction",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=e(h.prototype,"gameDirector",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./cardSuits.ts","./SingleCard.ts","./CardDeck.ts","./TopBar.ts","./GameDirector.ts","./SpeakButton.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});